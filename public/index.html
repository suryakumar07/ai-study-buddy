<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Study Buddy - Your Friendly Bilingual Tutor</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="header__title">AI Study Buddy ЁЯУЪ</h1>
            <p class="header__subtitle">Your Friendly Bilingual Tutor / роЙроЩрпНроХро│рпН роироЯрпНрокрпБ роЗро░рпБроорпКро┤ро┐ роЖроЪро┐ро░ро┐ропро░рпН</p>
        </header>

        <section class="auth-section">
            <h2>ЁЯФС Login / Signup</h2>
                <div id="auth-area">
                    <input id="auth-email" placeholder="Email" class="form-control" />
                    <input id="auth-pass" placeholder="Password" type="password" class="form-control" />
                <div class="auth-buttons">
                    <button id="btn-signup" class="btn btn--secondary">Sign Up</button>
                    <button id="btn-login" class="btn btn--primary">Login</button>
                    <button id="btn-logout" class="btn btn--danger" style="display:none">Logout</button>
                </div>
                <p id="auth-msg" class="auth-msg"></p>
            </div>
        </section>

        <!-- Input Section -->
        <section class="input-section">
            <div class="input-container">
                <label for="query-input" class="form-label">What would you like to learn today?</label>
                <textarea 
                    id="query-input" 
                    class="form-control query-textarea" 
                    placeholder="Ask me anything! Type your question, concept, or paste text here... / роОройрпНройро┐роЯроорпН роОродрпИропрпБроорпН роХрпЗро│рпБроЩрпНроХро│рпН! роЙроЩрпНроХро│рпН роХрпЗро│рпНро╡ро┐ роЕро▓рпНро▓родрпБ роХро░рпБродрпНродрпИ роЗроЩрпНроХрпЗ родроЯрпНроЯроЪрпНроЪрпБ роЪрпЖропрпНропрпБроЩрпНроХро│рпН..."
                    rows="4"
                ></textarea>
                <div class="input-helper">
                    <span class="character-count">0 characters</span>
                    <div class="sample-topics">
                        <span>Try: </span>
                        <button class="sample-btn" data-topic="Photosynthesis">Photosynthesis</button>
                        <button class="sample-btn" data-topic="Pythagorean Theorem">Pythagorean Theorem</button>
                        <button class="sample-btn" data-topic="Indian Independence Movement">Independence Movement</button>
                    </div>
                </div>
                <button id="submit-btn" class="btn btn--primary btn--lg submit-button">
                    <span class="submit-text">Get Help! ЁЯЪА</span>
                    <span class="loading-text hidden">Learning... ЁЯУЦ</span>
                </button>
            </div>
        </section>

        <!-- Loading Indicator -->
        <div id="loading-indicator" class="loading-indicator hidden">
            <div class="loading-spinner"></div>
            <p>Processing your query... / роЙроЩрпНроХро│рпН роХрпЗро│рпНро╡ро┐ропрпИроЪрпН роЪрпЖропро▓рпНрокроЯрпБродрпНродрпБроХро┐ро▒родрпБ...</p>
        </div>

        <!-- Results Section -->
        <section id="results-section" class="results-section hidden">
            <!-- Simple Explanation -->
            <div class="result-block">
                <h2 class="result-title">ЁЯУЦ Simple Explanation / роОро│ро┐роп ро╡ро┐ро│роХрпНроХроорпН</h2>
                <div class="explanation-content">
                    <div class="explanation-english">
                        <h3>English:</h3>
                        <p id="explanation-en"></p>
                    </div>
                    <div class="explanation-tamil">
                        <h3>родрооро┐ро┤рпН:</h3>
                        <p id="explanation-ta"></p>
                    </div>
                </div>
            </div>

            <!-- Flashcards -->
            <div class="result-block">
                <h2 class="result-title">ЁЯУЭ Flashcards / роГрокро┐ро│ро╛ро╖рпН роХро╛ро░рпНроЯрпБроХро│рпН</h2>
                <div id="flashcards-container" class="flashcards-container">
                    <!-- Flashcards will be dynamically inserted here -->
                </div>
            </div>

            <!-- Practice Questions -->
            <div class="result-block">
                <h2 class="result-title">ЁЯОп Practice Questions / рокропро┐ро▒рпНроЪро┐ роХрпЗро│рпНро╡ро┐роХро│рпН</h2>
                
                <!-- MCQ Section -->
                <div class="question-section">
                    <h3>Multiple Choice Questions (3 questions):</h3>
                    <div id="mcq-container" class="mcq-container">
                        <!-- MCQ questions will be inserted here -->
                    </div>
                </div>

                <!-- Short Answer Section -->
                <div class="question-section">
                    <h3>Short Answer Questions (2-3 marks each):</h3>
                    <div id="short-answer-container" class="short-answer-container">
                        <!-- Short answer questions will be inserted here -->
                    </div>
                </div>

                <!-- Long Answer Section -->
                <div class="question-section">
                    <h3>Long Answer Question (5 marks):</h3>
                    <div id="long-answer-container" class="long-answer-container">
                        <!-- Long answer question will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Quick Revision -->
            <div class="result-block">
                <h2 class="result-title">тЪб Quick Revision / ро╡ро┐ро░рпИро╡рпБ родро┐ро░рпБрокрпНрокрпБродро▓рпН</h2>
                <div class="quick-revision-content">
                    <div class="revision-english">
                        <h3>English:</h3>
                        <p id="revision-en"></p>
                    </div>
                    <div class="revision-tamil">
                        <h3>родрооро┐ро┤рпН:</h3>
                        <p id="revision-ta"></p>
                    </div>
                </div>
            </div>

            <!-- Success Message -->
            <div class="success-message">
                <p>ЁЯОЙ Great job! Keep learning and you'll ace your exams! / роЪро┐ро▒рокрпНрокрпБ! родрпКроЯро░рпНроирпНродрпБ роХро▒рпНро▒рпБроХрпНроХрпКрогрпНроЯрпБ роЙроЩрпНроХро│рпН родрпЗро░рпНро╡рпБроХро│ро┐ро▓рпН ро╡рпЖро▒рпНро▒ро┐ рокрпЖро▒рпБроЩрпНроХро│рпН!</p>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Made with тЭдя╕П for Indian Students | роЗроирпНродро┐роп рооро╛рогро╡ро░рпНроХро│рпБроХрпНроХро╛роХ роЕройрпНрокрпБроЯройрпН роЙро░рпБро╡ро╛роХрпНроХрокрпНрокроЯрпНроЯродрпБ</p>
        </footer>
    </div>

    <script type="module">
    import { signUp, login, getSession, setupAuthListener } from './js/auth.js'
    import { supabase } from './js/supabaseClient.js'

    const $email = document.getElementById('auth-email')
    const $pass = document.getElementById('auth-pass')
    const $msg = document.getElementById('auth-msg')

    document.getElementById('btn-signup').addEventListener('click', async () => {
        try {
        await signUp($email.value, $pass.value)
        $msg.innerText = 'Signup successful! Check your email to confirm.'
        } catch (e) {
        $msg.innerText = e.message
        }
    })

    document.getElementById('btn-login').addEventListener('click', async () => {
        try {
        await login($email.value, $pass.value)
        $msg.innerText = 'Logged in!'
        } catch (e) {
        $msg.innerText = e.message
        }
    })

    document.getElementById('btn-logout').addEventListener('click', async () => {
        await supabase.auth.signOut()
        $msg.innerText = 'Logged out.'
    })

    // Update UI based on auth state
    setupAuthListener((event, session) => {
        const loggedIn = !!session?.user
        document.getElementById('btn-logout').style.display = loggedIn ? 'inline-block' : 'none'
        // Optional: hide study input until login
        document.querySelector('.input-section').style.display = loggedIn ? 'block' : 'none'
    })
    </script>


    <script src="app.js"></script>
</body>
</html>